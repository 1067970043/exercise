## 瓦片图层

指将一定范围内的地图按照一定的尺寸和格式，按缩放级别或者比例尺，切成若干行和列的正方形栅格图片，对切片后的正方形栅格图片被形象的称为瓦片（Tile）。

瓦片地图金字塔模型是一种多分辨率层次模型，从瓦片金字塔的底层到顶层，分辨率越来越低，但表示的地理范围不变。

![img](https://img-blog.csdnimg.cn/20190505211141797.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTEzNjU3MTY=,size_16,color_FFFFFF,t_70)

### 地图坐标系

- 经纬度坐标系
- 像素坐标系
  像素坐标系，也可以成为屏幕坐标系，像素坐标系和地图的经纬度坐标系存在对应关系，屏幕上的每一个像素都对应一个经纬度点位置。 不同缩放级别下，像素坐标系和经纬度坐标系的对应关系是不同的。
- 投影坐标系
  投影坐标系在GIS系统中非常的重要，作用是将经纬度坐标系和屏幕的像素坐标系关联起来。理解投影坐标系也是GIS系统研究中的一个重要环节。

### 地图投影

1、按变形方式分为等角投影，投影面上任意两方向的夹角与地面上对应的角度相等；

等(面)积投影，地图上任何图形面积经主比例尺放大以后与实地上相应图形面积保持大小不变的一种投影方法；

任意投影，为既不等角也不等积的投影，在标准经纬线上无长度变形。

2、按正轴投影经纬网形状分为平面投影，将地球表面的经纬线投影到与球面相切或相割的平面去；

圆锥投影，圆锥轴与地轴重合，然后以球心为视点，将地面的经纬线投影到圆锥面，再沿圆锥母线切开展成平面；

圆柱投影；

多圆锥投影，投影纬线为同轴圆圆弧，经线为对称中央直径线曲线。

3、根据投影面与地球表面的相关位置分为正轴投影（重合），投影面的中心线与地轴一致；

斜轴投影（斜交），投影面的中心线与地轴斜交；

横轴投影（垂直），投影面的中心线与地轴垂直。

### WMS与WMTS

- WMS（Web Map Service）

在浏览器这一端，没有地图的概念，但浏览器天生就是为了显示文本和图片。WMS的设计是，在服务器端把地图渲染成图片，浏览器端显示地图图片。地图图片大小根据浏览器视窗大小来定。

- WMTS（Web Map Tile Service）

WMTS不同于WMS,它最重要的特征是采用缓存技术能够缓解WebGIS服务器端数据处理的压力，提高交互响应速度，大幅改善在线地图应用客户端的用户体验。WMTS是OGC主推的缓存技术规范，是目前各种缓存技术相互兼容的一种方法。

### SQLite

SQLite是一款轻量级的开源的嵌入式数据库，可用于预先存储瓦片数据。

### 总结

在地图上的大部分标记操作都是建立在平面坐标系的基础上进行，包括标点，图片文字标注，矢量标注，图形标注。



## EPSG

EPSG对世界的每一个地方都制定了地图，但是由于座标系不同，所以地图也各不相同。

该组织发布了一个坐标参照系统的数据集，并维护坐标参照系统的数据集参数，以及坐标转换描述，数据集对全球收录到的坐标参照系统进行了编码。

[epsg的官网](https://epsg.io/)可以通过EPSG编码值查询所对应的坐标参照系统，EPSG编码值也叫做SRID，不同的EPSG code代表特定的椭球体、单位、地理坐标系或投影坐标系等信息。

使用较多的是EPSG:4326与EPSG:3857

### EPSG:4326

EPSG:4326 是 WGS84 的代码，是目前最流行的地理坐标系统，GPS是基于WGS84的，所以通常我们得到的坐标数据都是WGS84的。一般我们在存储数据时，仍然按WGS84存储。

### EPSG:3857

基于墨卡托投影，将WGS84坐标系投影到正方形上。伪墨卡托投影把坐标投影到球体上，这导致两极的失真变大，但是却更容易计算。

## WKT

### 空间参考系统

也称为坐标系统。

在GIS中，如果没有空间参考系统，那么坐标也没有意义。空间参考系统定义了由投影坐标系的平面坐标转换到地理坐标的经纬度的规则。

### 空间参考系统的表示方法

WKT主要就是用文本的方法表示空间参考系统





## OGC规范

OGC全称——开放地理空间信息联盟(Open Geospatial Consortium), 它的主要目的就是制定与空间信息、基于位置服务相关的标准。

目前OGC提供的标准多达几十种，包括常用到的WMS、WFS、WCS、WMTS等。

### WMS服务

全称是Web Map Service （web地图服务），目前OGC提供的WMS最新版本为1.3.0，提供以下接口：

- GetCapabilities：获取服务中的要素及支持的操作
- GetMap：获取地图数据
- GetFeatureInfo：获取getMap响应地图上某一点的特征数据信息

### WFS服务

WFS服务，全称是Web Feature Service (web 要素服务)，目前OGC提供的WFS最新版本为2.0.2，并且提供如下几种操作：

- GetCapabilities： 获取服务中的要素及支持的操作
- DescribeFeatureType： 获取地理要素类型的GML应用模式描述文档
- GetFeature： 根据条件查询地理要素信息

### WCS服务

WCS服务，全称为Web Coverage Service（web栅格服务），目前OGC提供的WCS的最新版本为2.1，并提供了如下几种操作：

- Getcapabilities: 获取服务中的要素及支持的操作
- DescribeCoverage: 返回标识覆盖范围的文档描述
- GetCoverage: 获取服务器上元数据与请求数据的覆盖数据

### WMTS服务

WMTS服务，全称是Web Map Tile Service (web地图切片服务)，目前OGC提供的最新版本是1.0.0，WMTS是OGC首个支持restful风格的服务标准，提供了如下几种操作：

- GetCapabilities：获取服务的元数据信息

- GetTile：获取服务的切片信息

- GetFeatureInfo：获取点选的要素信息



## 投影方式

### 参考椭球体

是一个数学上定义的地区表面，近似于大地水准面。所以因为大致水准面并不规则，地球上不同地区往往需要使用不同的参考椭球体。

### 坐标系

- 地理坐标系：为球面坐标。 参考平面地是椭球面，坐标单位：经纬度；
- 投影坐标系：为平面坐标。参考平面地是水平面，坐标单位：米、千米等；

#### 投影坐标系

地理坐标系是三维的，我们要在地图或者屏幕上显示就需要转化为二维，这被称为投影。投影椭圆，必然会导致变形和失真，失真不可避免，但不同的投影方式导致失真的程度不同。常见的投影方式有等矩矩形投影和墨卡托投影。![img](https://img2018.cnblogs.com/blog/165220/201909/165220-20190904172204757-1850337732.png)

右上为墨卡托投影，投影后仍然是圆形，但是在高纬度时物体被严重放大了。右下为等距投影，物体的大小变化不是那么明显，但是图像被拉长了。

**贝塞尔曲线**

应用于二维图形应用程序的数学曲线，贝塞尔曲线是计算机图形学中相当重要的参数曲线。

理解：

Bezier曲线是用一系列点控制曲线状态的。主要分为

- 数据点：确定曲线的起始和结束位置
- 控制点：确定曲线的弯曲程度

曲线经过的每一个点都满足规律：

在初始线上存在一点，在AB上取一点D，得出该线起点到终点的比例，取所有直线上该比例的点，得出的相邻点进行连接，得到新的直线，再在得出的直线上进行该操作，直到得出最后的直线，在这条线上取同样的比例得出点，该点为曲线经过的点。

![img](https://img2018.cnblogs.com/blog/449809/201910/449809-20191009163226592-1802036977.png)

基本规律：B（t）为坐标，P为各个数据点的坐标，t为比例

一次贝塞尔曲线：

B(t) = (1 - t) * P0 + tP1

将B（t）带入P1

二次贝塞尔曲线：
$$
B(t)=(1-t)^2P_0+2t(1-t)P_1+t^2P_2,t in [0,1]
$$
[![img](https://frontzhm.github.io/2017/07/07/bezier/two.jpg)](https://frontzhm.github.io/2017/07/07/bezier/two.jpg)

三次贝塞尔曲线：

![img](https://img2018.cnblogs.com/blog/449809/201910/449809-20191009163528922-1912967202.png)

## 三原色融合规律：

三原色分别为：红色，蓝色，绿色

当多个原色融合在一起时，满足以下规律：

1、同种原色合成会出现黑色

2、三种颜色相融合出现白色

3、红 + 蓝 = 紫	红 + 绿 = 黄	蓝 + 绿 = 青

4、任何原色都能覆盖黑色

